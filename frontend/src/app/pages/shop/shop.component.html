<main class="container mx-auto px-4 py-8">
  <!-- Banner de la tienda con la imagen de fondo -->
  <div class="relative mb-8">
    <div class="h-64 rounded-lg flex items-center justify-center overflow-hidden">
      <!-- Imagen de fondo -->
      <div class="absolute inset-0 w-full h-full">
        <img 
          src="assets/banner-shop.png"
          alt="Background" 
          class="w-full h-full object-cover opacity-90"
        />
        <!-- Overlay para mejorar la legibilidad del texto -->
        <div class="absolute inset-0 bg-black-100 bg-opacity-30"></div>
      </div>
      
      <!-- Contenido del banner -->
      <div class="text-center relative z-10">
        <h1 class="text-4xl font-bold text-black-200 mb-2 drop-shadow-md">Shop Collection</h1>
        <p class="text-black drop-shadow-md">Home > My account</p>
      </div>
    </div>
  </div>

  <!-- Barra de filtros con menú desplegable -->
  <div class="flex flex-col sm:flex-row justify-between items-center mb-8 bg-gray-50 p-3 rounded-md">
    <div class="flex items-center space-x-4 mb-3 sm:mb-0">
      <!-- Botón de filtro con menú desplegable -->
      <div class="relative">
        <button 
          (click)="toggleFilterMenu()" 
          class="flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-md bg-white">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z" />
          </svg>
          <span>Filter: {{ selectedCategory }}</span>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4 ml-1">
            <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
          </svg>
        </button>
        
        <!-- Menú desplegable de categorías -->
        <div *ngIf="showFilterMenu" class="absolute z-10 mt-1 w-48 bg-white border border-gray-300 rounded-md shadow-lg">
          <div class="py-1">
            <a 
              *ngFor="let category of categories" 
              (click)="setCategory(category)" 
              [class.bg-gray-100]="selectedCategory === category"
              class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 cursor-pointer">
              {{ category }}
            </a>
          </div>
        </div>
      </div>
      
      <div class="flex border border-gray-300 rounded-md overflow-hidden">
        <button 
          (click)="viewMode = 'grid'" 
          [class.bg-white]="viewMode === 'grid'"
          [class.bg-gray-100]="viewMode !== 'grid'"
          class="p-2">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z" />
          </svg>
        </button>
        <button 
          (click)="viewMode = 'list'" 
          [class.bg-white]="viewMode === 'list'"
          [class.bg-gray-100]="viewMode !== 'list'"
          class="p-2">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z" />
          </svg>
        </button>
      </div>
      
      <div class="text-sm text-gray-600">
        <span *ngIf="totalResults > 0">
          Showing {{ showingFrom }}-{{ showingTo }} of {{ totalResults }} results
        </span>
        <span *ngIf="totalResults === 0">
          No products found
        </span>
      </div>
    </div>
    
    <div class="flex items-center space-x-4">
      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-600">Show</span>
        <select 
          [(ngModel)]="itemsPerPage"
          (change)="setItemsPerPage(itemsPerPage)"
          class="appearance-none bg-white border border-gray-300 rounded-md py-1 pl-3 pr-8 text-sm leading-5 focus:outline-none focus:ring-1 focus:ring-black focus:border-black">
          <option *ngFor="let option of itemsPerPageOptions" [value]="option">{{ option }}</option>
        </select>
      </div>
      
      <div class="flex items-center space-x-2">
        <span class="text-sm text-gray-600">Short by</span>
        <select 
          [(ngModel)]="selectedSort"
          (change)="setSort(selectedSort)"
          class="appearance-none bg-white border border-gray-300 rounded-md py-1 pl-3 pr-8 text-sm leading-5 focus:outline-none focus:ring-1 focus:ring-black focus:border-black">
          <option *ngFor="let option of sortOptions" [value]="option">{{ option }}</option>
        </select>
      </div>
    </div>
  </div>

  <!-- Mensaje cuando no hay productos -->
  <div *ngIf="paginatedProducts.length === 0" class="text-center py-12">
    <p class="text-gray-500 text-lg">No products found matching your criteria.</p>
    <button 
      (click)="setCategory('All')" 
      class="mt-4 px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition-colors">
      View All Products
    </button>
  </div>

  <!-- Cuadrícula de productos -->
  <div *ngIf="paginatedProducts.length > 0" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
    <div *ngFor="let product of paginatedProducts" class="group relative">
      <div class="aspect-h-1 aspect-w-1 w-full overflow-hidden rounded-lg bg-gray-100">
        <img src="{{product?.imagesRoute}}1.jpg" alt="{{ product.name }}" class="h-full w-full object-cover object-center">
        
        <!-- Botones de acción -->
        <div class="absolute top-2 right-2 flex flex-col gap-2 opacity-0 group-hover:opacity-100 transition-opacity">
          <button (click)="addToWishlist(product.id)" class="bg-white p-2 rounded-full shadow-md hover:bg-gray-100">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z" />
            </svg>
          </button>
          <a [routerLink]="['/product-view', product.id]" routerLinkActive="active">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z" />
              </svg>
          </a>
        </div>
      </div>
      
      <div class="mt-4">
        <h3 class="text-sm font-medium text-gray-900">{{ product.name }}</h3>
        <div class="flex items-center mt-1">
          <p *ngIf="product.discountPrice" class="text-sm font-medium text-gray-900">${{ product.discountPrice }}</p>
          <p [class.line-through]="product.discountPrice" [class.text-gray-500]="product.discountPrice" [class.text-gray-900]="!product.discountPrice" class="text-sm font-medium ml-2">${{ product.price }}</p>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Paginación dinámica -->
  <div *ngIf="totalPages > 1" class="mt-12 flex justify-center">
    <nav class="flex items-center gap-1">
      <!-- Botón anterior -->
      <button 
        (click)="previousPage()" 
        [disabled]="currentPage === 1"
        [class.opacity-50]="currentPage === 1"
        class="p-2 rounded-md border border-gray-300 hover:bg-gray-100 disabled:hover:bg-white">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5" />
        </svg>
      </button>
      
      <!-- Números de página -->
      <ng-container *ngFor="let page of pages">
        <ng-container *ngIf="page !== '...'">
          <button 
            (click)="goToPage(page)" 
            [class.bg-black]="currentPage === page"
            [class.text-white]="currentPage === page"
            [class.hover:bg-gray-100]="currentPage !== page"
            class="px-3 py-1 rounded-md">
            {{ page }}
          </button>
        </ng-container>
        <span *ngIf="page === '...'" class="px-2">...</span>
      </ng-container>
      
      <!-- Botón siguiente -->
      <button 
        (click)="nextPage()" 
        [disabled]="currentPage === totalPages"
        [class.opacity-50]="currentPage === totalPages"
        class="p-2 rounded-md border border-gray-300 hover:bg-gray-100 disabled:hover:bg-white">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5" />
        </svg>
      </button>
    </nav>
  </div>
</main>